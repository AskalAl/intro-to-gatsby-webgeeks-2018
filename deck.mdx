export { default as theme } from './theme'
import { FullScreenCode, Invert } from 'mdx-deck/layouts'
import { Appear, Image } from 'mdx-deck'

# Intro to Gatsby
It's the future, y'all
---
# What is Gatsby?
- Static site builder
- Built using React components
- Has many adapters (Markdown, WordPress, Stripe)
- Leverages GraphQL for fetching data within components

```notes
- Bullets
- $3.8M in seed funding
- Have a hosted cloud version for $$$, similar to WP, Ghost model
```
---
# Installing Gatsby

<div style={{ fontSize: '1.5em' }}>

```
yarn global add gatsby-cli
gatsby new my-gatsby-project
cd my-new-project && yarn develop
```

</div>
---
export default FullScreenCode

```jsx
  // src/pages/index.js

  import React from 'react'
  import Link from 'gatsby-link'
  const IndexPage = () => (
    <div>
      <h1>Hi people</h1>
      <p>Welcome to your new Gatsby site.</p>
      <p>Now go build something great.</p>
      <Link to="/page-2/">Go to page 2</Link>
    </div>
  )
  export default IndexPage
```
---
export default FullScreenCode

```jsx
  // src/pages/page-2.js

  import React from 'react'
  import Link from 'gatsby-link'

  const SecondPage = () => (
    <div>
      <h1>Hi from the second page</h1>
      <p>Welcome to page 2</p>
      <Link to="/">Go back to the homepage</Link>
    </div>
  )

  export default SecondPage
```
---
<Image src='images/gatsby_starter.png' />
---
# Then what?

- Customize
- Build
- Amazon S3, Netlify, GitHub Pages, Surge.sh, Aerobatic, Now.sh, & many more

```notes
- Changes are hot-reloaded
- You can deploy to a number of places, either a hosted static site provider
- You could even use a simple web server
```
---
# So what?
- How is Gatsby different?
- Shouldn't I just use Jekyll?

```notes
- What's so special about Gatsby then?
- What about Jekyll, which was kind of a defacto static site builder forever
- Or Middleman for building more complex apps
```
---
export default Invert

# Here's what
---
# Modern Development

```notes
- Besides being built with React and Webpack...
- PWA
- Code and data splitting
- Loads only critical HTML, CSS, and data
- Prefetches important assets
- You have to do none of this!
```
---
<Image src='https://pmcvariety.files.wordpress.com/2016/02/transformers-age-of-extinction.jpg' />
---
# Transformers
- Markdown
- Images
- JSON
- YAML
- CSV

---
# Source Plugins
- WordPress
- Netlify CMS
- Vimeo, Trello, Craft, MongoDB, Stripe

---
# But where's the data?

```js
const wordPressData = await fetch('https://your.wordpress.sit/wp-json/wp/v2/posts')
  .then(d => d.json())
const stripeData = await fetch('https://api.stripe.com/transactions')
  .then(d => d.json());
// blah blah blah a million more times
```

```notes
- So if you were building a project with Jekyll or a vanilla static site
- Normally have to do this
- Is this necessary for Gatsby?
```
---
# Nope

```notes
- Transformers work behind the scenes on build
- They move the data into a queryable format for the front-end components
- That format is...
```
---
# GraphQL
- It's used in Gatsby
- Gosh, it's a real treat

```notes
- How many of you have heard of it?
- (reveal)
- It's gonna blow your minds
- Gatsby leverages this in some really cool ways to expose your data
- How does GraphQL work?
```
---
export default Invert

# GraphQL, Explained
---
> GraphQL is a query language for APIs and a runtime for fulfilling those queries with your existing data.

```notes
- Like writing SQL, but to a JSON endpoint
- Open-source, built by Facebook
```
---
> Ask for what you need, get exactly that

```notes
- Most REST APIs return the entire record (or records), when all you really want is a title
```
---
## Describe your data

```graphql
type Project {
  name: String
  tagline: String
  contributors: [User]
}
```

```notes
- Define the type with all possible fields
- This allows GraphQL to be self-documenting
- Tools can introspect which fields are available
```
---
## Ask for what you want

```graphql
{
  project(name: "GraphQL") {
    tagline
  }
}
```

```notes
- I want the project
- Named graphql
- But I only need the tagline
```
---
## Get predictable results

```json
{
  "project": {
    "tagline": "A query language for APIs"
  }
}
```
---
# GraphQL in Gatsby

- Compiles all sources and pages into a GraphQL data source
- Allows you to write queries in your components
- Extracts queries at build time and inserts the data
---
<Image src='images/graphql_1.png' />

```notes
- Gatsby exposes a GraphQL UI out of the box
- Note the query on the left. We're fetching all site pages
- Asking for specific fields: id, path, jsonName
- Docs are available + autocomplete!
```
---
- Let's build a Web Geeks site with Gatsby
- Install the WordPress source plugin
- Config
- Demo the CLI pulling down the posts
- Test using GraphQL queries
- Update the UI
- Split into component
- Build custom pages
- Link to pages
---
# My notes
- Why `import React`? It's dumb and weird.
- As an experienced JS Dev, I struggled with knowing WTF was going on in some places.
- Example: arrow functions with no curly braces, returning JSX.
- When do I need to wrap with parens and when not?
- Pretty adds semicolons in front of JSX tags sometimes which freaked me out
